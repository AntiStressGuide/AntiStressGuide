<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Health & Stress Index (WHO-Based)</title>
<style>
body { font-family: Roboto, Arial, sans-serif; back<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Health & Stress Index (WHO-Based)</title>
<style>
body { font-family: Roboto, Arial, sans-serif; background:#eaf5e8; margin:0; padding:0; }
.container { max-width:700px; margin:30px auto; background:#fff; padding:30px; border-radius:10px; }
h1, h2 { color:#2E5D3D; text-align:center; }
.question { margin:15px 0; padding:15px; border-radius:8px; }
.question:nth-child(odd) { background:#e0f2e9; }
.question:nth-child(even) { background:#f7fff8; }
label { display:block; margin:5px 0; }
input[type="range"] { width:100%; margin-top:5px; }
.range-labels { display:flex; justify-content:space-between; font-size:14px; color:#555; margin-top:5px; }
input[type="checkbox"], input[type="radio"] { margin-right:5px; }
select, input[type=email] { width:100%; padding:8px; margin-top:5px; border-radius:5px; border:1px solid #ccc; }
button { margin-top:10px; padding:12px 25px; color:#fff; background:#2E5D3D; border:none; border-radius:5px; cursor:pointer; font-size:16px; }
button:hover { background:#27623e; }
.score { margin-top:15px; padding:15px; border:1px solid #ccc; border-radius:5px; background:#d4efd5; text-align:center; }
nav { text-align:center; margin-bottom:20px; }
nav a { margin:0 10px; text-decoration:underline; color:#007bff; font-weight:bold; }
nav a:hover { color:#27623e; }
#trafficLight { display:flex; justify-content:center; margin-top:15px; }
#trafficLight div { width:30px; height:30px; border-radius:50%; margin:0 5px; opacity:0.3; }
#trafficLight div.green1 { background:#004d00; }
#trafficLight div.green2 { background:#32CD32; }
#trafficLight div.yellow { background:#FFD700; }
#trafficLight div.orange { background:#FFA500; }
#trafficLight div.red { background:#FF0000; }
</style>
</head>
<body>

<div class="container">
<nav>
  <a href="index.html">Home</a>
  <a href="results.html">Assessment</a>
  <a href="recommendations.html">Recommendations</a>
</nav>

<h1>Health & Stress Index (WHO-Based)</h1>

<form id="assessmentForm">

  <!-- Demographics -->
  <div class="question">
    <label>Age:</label>
    <select name="age" required>
      <option value="" disabled selected>Select age</option>
      <option value="18-30">18â€“30</option>
      <option value="31-50">31â€“50</option>
      <option value="51-70">51â€“70</option>
      <option value=">70">>70</option>
    </select>
  </div>

  <div class="question">
    <label>Gender:</label>
    <select name="gender" required>
      <option value="" disabled selected>Select gender</option>
      <option value="Male">Male</option>
      <option value="Female">Female</option>
      <option value="Other">Other</option>
    </select>
  </div>

  <!-- Health Conditions -->
  <h2>Health Conditions</h2>
  <div class="question">
    <label>Do you have any chronic diseases, medical conditions, or recent surgeries?</label>
    <label><input type="checkbox" name="chronic" value="None"> None</label>
    <label><input type="checkbox" name="chronic" value="Cardiovascular Disease"> Cardiovascular Disease</label>
    <label><input type="checkbox" name="chronic" value="Mental Health Condition"> Mental Health Condition</label>
    <label><input type="checkbox" name="chronic" value="Recent Surgery"> Recent Surgery</label>
    <label><input type="checkbox" name="chronic" value="Other"> Other</label>
  </div>

  <!-- Physical Activity -->
  <div class="question">
    <label>Weekly Physical Activity:</label>
    <label><input type="radio" name="physical" value="0" required> &lt;150 min/week, no strength</label>
    <label><input type="radio" name="physical" value="1"> 150â€“300 min/week, strength 0â€“1 days</label>
    <label><input type="radio" name="physical" value="2"> 150â€“300 min/week, strength 2+ days</label>
    <label><input type="radio" name="physical" value="3"> &gt;300 min/week, strength 2+ days</label>
    <label><input type="radio" name="physical" value="4"> Vigorous 75â€“150+ min/week, strength 2+ days</label>
  </div>

  <h2>Harmful Habits</h2>

  <div class="question">
    <label>Alcohol consumption</label>
    <label><input type="radio" name="alcohol" value="0" required> None (0 drinks/week)</label>
    <label><input type="radio" name="alcohol" value="1"> Low risk</label>
    <label><input type="radio" name="alcohol" value="2"> Moderate risk</label>
    <label><input type="radio" name="alcohol" value="3"> High risk</label>
    <label><input type="radio" name="alcohol" value="4"> Very high</label>
  </div>

  <div class="question">
    <label>Tobacco use</label>
    <label><input type="radio" name="tobacco" value="0" required> None</label>
    <label><input type="radio" name="tobacco" value="1"> Low</label>
    <label><input type="radio" name="tobacco" value="2"> Moderate</label>
    <label><input type="radio" name="tobacco" value="3"> High</label>
    <label><input type="radio" name="tobacco" value="4"> Very high</label>
  </div>

  <div class="question">
    <label>Drug use</label>
    <label><input type="radio" name="drugs" value="0" required> None</label>
    <label><input type="radio" name="drugs" value="1"> Low</label>
    <label><input type="radio" name="drugs" value="2"> Moderate</label>
    <label><input type="radio" name="drugs" value="3"> High</label>
    <label><input type="radio" name="drugs" value="4"> Very high</label>
  </div>

  <div class="question">
    <label>Gambling</label>
    <label><input type="radio" name="gambling" value="0" required> None</label>
    <label><input type="radio" name="gambling" value="1"> Low</label>
    <label><input type="radio" name="gambling" value="2"> Moderate</label>
    <label><input type="radio" name="gambling" value="3"> High</label>
    <label><input type="radio" name="gambling" value="4"> Very high</label>
  </div>

  <!-- Stress & Well-Being -->
  <h2>Stress & Well-Being (0â€“4 Likert Scale)</h2>
  <div id="questions"></div>

  <!-- Email -->
  <div class="question">
    <label>Email (optional)</label>
    <input type="email" name="email" placeholder="you@example.com">
  </div>

  <button type="submit">Submit</button>
</form>

<div class="score" id="results" style="display:none;">
  <p>Total Index: <span id="totalPoints"></span></p>
  <p>Category: <span id="category"></span></p>
  <div id="trafficLight">
    <div class="green1"></div>
    <div class="green2"></div>
    <div class="yellow"></div>
    <div class="orange"></div>
    <div class="red"></div>
  </div>
  <button id="newForm">Fill Again</button>
</div>

<script>
const likertLabels = ["Never","Rarely","Sometimes","Often","Very Often"];
const stressQuestions = [
  "In the past month, I felt that things were generally going my way.",
  "During the last month, I felt confident about handling personal problems.",
  "Over the past month, I felt physically and mentally healthy enough to meet daily demands.",
  "In the past month, I was satisfied with my overall well-being and quality of life.",
  "During the last month, I felt energetic and capable of handling both work and personal responsibilities.",
  "Over the past month, I could take breaks and recover adequately during and between workdays.",
  "In the last month, support from colleagues helped me cope with stress.",
  "During the past month, my work schedule allowed me to maintain a healthy work-life balance.",
  "Over the last month, my workload prevented me from completing important personal tasks.",
  "In the past month, I had sufficient control over how I completed my work tasks."
];

// Render stress questions
const questionsDiv = document.getElementById('questions');
stressQuestions.forEach((q,i)=>{
  const div = document.createElement('div');
  div.className='question';
  div.innerHTML = `
    <label>${q}</label>
    <input type="range" min="0" max="4" value="2" name="q${i}" required>
    <div class="range-labels">
      ${likertLabels.map(label=>`<span>${label}</span>`).join('')}
    </div>`;
  questionsDiv.appendChild(div);
});

// Submit form
const form = document.getElementById('assessmentForm');
form.addEventListener('submit', e=>{
  e.preventDefault();

  // Punkte sammeln
  let badPoints = 0;
  const fields = ['alcohol','tobacco','drugs','gambling'];
  fields.forEach(f=>{
    badPoints += parseInt(form[f].value);
  });

  // chronische Krankheiten
  const chronicPoints = Array.from(form.querySelectorAll('input[name="chronic"]:checked')).map(c=>c.value=='None'?0:1);
  badPoints += chronicPoints.reduce((a,b)=>a+b,0);

  // Alter als schlechter Faktor
  const agePoints = {'18-30':0,'31-50':1,'51-70':2,'>70':3};
  badPoints += agePoints[form.age.value];

  // Stress Fragen
  let stressPoints = 0;
  stressQuestions.forEach((q,i)=>{
    stressPoints += parseInt(form.querySelector(`input[name="q${i}"]`).value);
  });

  badPoints += stressPoints;

  // Physische AktivitÃ¤t abziehen
  const physicalPoints = parseInt(form.querySelector('input[name="physical"]:checked').value);
  const totalPoints = badPoints - physicalPoints;
  document.getElementById('totalPoints').textContent = totalPoints;

  // Kategorie bestimmen
  let category='';
  if(totalPoints<=12) category='ðŸ”µ Sehr gut';
  else if(totalPoints<=24) category='ðŸŸ¢ Gut';
  else if(totalPoints<=36) category='ðŸŸ¡ MÃ¤ÃŸig';
  else if(totalPoints<=48) category='ðŸŸ  ErhÃ¶ht';
  else category='ðŸ”´ Hoch';

  document.getElementById('category').textContent = category;

  // Ampel
  const lights = document.querySelectorAll('#trafficLight div');
  lights.forEach(light => light.style.opacity='0.3');
  if(totalPoints<=12) lights[0].style.opacity='1';
  else if(totalPoints<=24) lights[1].style.opacity='1';
  else if(totalPoints<=36) lights[2].style.opacity='1';
  else if(totalPoints<=48) lights[3].style.opacity='1';
  else lights[4].style.opacity='1';

  form.style.display='none';
  document.getElementById('results').style.display='block';
});

// Reset form
document.getElementById('newForm').addEventListener('click', ()=>{
  form.reset();
  form.style.display='block';
  document.getElementById('results').style.display='none';
});
</script>
</body>
</html>
ground:#eaf5e8; margin:0; padding:0; }
.container { max-width:700px; margin:30px auto; background:#fff; padding:30px; border-radius:10px; }
h1, h2 { color:#2E5D3D; text-align:center; }
.question { margin:15px 0; padding:15px; border-radius:8px; }
.question:nth-child(odd) { background:#e0f2e9; }
.question:nth-child(even) { background:#f7fff8; }
label { display:block; margin:5px 0; }
input[type="range"] { width:100%; margin-top:5px; }
.range-labels { display:flex; justify-content:space-between; font-size:14px; color:#555; margin-top:5px; }
input[type="checkbox"], input[type="radio"] { margin-right:5px; }
select, input[type=email] { width:100%; padding:8px; margin-top:5px; border-radius:5px; border:1px solid #ccc; }
button { margin-top:10px; padding:12px 25px; color:#fff; background:#2E5D3D; border:none; border-radius:5px; cursor:pointer; font-size:16px; }
button:hover { background:#27623e; }
.score { margin-top:15px; padding:15px; border:1px solid #ccc; border-radius:5px; background:#d4efd5; text-align:center; }
nav { text-align:center; margin-bottom:20px; }
nav a { margin:0 10px; text-decoration:underline; color:#007bff; font-weight:bold; }
nav a:hover { color:#27623e; }
</style>
</head>
<body>

<div class="container">
<nav>
  <a href="index.html">Home</a>
  <a href="results.html">Assessment</a>
  <a href="recommendations.html">Recommendations</a>
</nav>

<h1>Health & Stress Index (WHO-Based)</h1>

<form id="assessmentForm">

  <!-- Demographics -->
  <div class="question">
    <label>Age:</label>
    <select name="age" required>
      <option value="" disabled selected>Select age</option>
      <option value="18-30">18â€“30</option>
      <option value="31-50">31â€“50</option>
      <option value="51-70">51â€“70</option>
      <option value=">70">>70</option>
    </select>
  </div>

  <div class="question">
    <label>Gender:</label>
    <select name="gender" required>
      <option value="" disabled selected>Select gender</option>
      <option value="Male">Male</option>
      <option value="Female">Female</option>
      <option value="Other">Other</option>
    </select>
  </div>

  <!-- Health Conditions -->
  <h2>Health Conditions</h2>
<div class="question">
    <label>Do you have any chronic diseases, medical conditions, or recent surgeries?</label>
    <label><input type="checkbox" name="chronic" value="None"> None</label>
    <label><input type="checkbox" name="chronic" value="Cardiovascular Disease"> Cardiovascular Disease</label>
    <label><input type="checkbox" name="chronic" value="Mental Health Condition"> Mental Health Condition</label>
    <label><input type="checkbox" name="chronic" value="Recent Surgery"> Recent Surgery</label>
    <label><input type="checkbox" name="chronic" value="Other"> Other</label>
</div>


  <!-- Physical Activity -->
  <div class="question">
    <label>Weekly Physical Activity:</label>
    <label><input type="radio" name="physical" value="Little or no activity" required> &lt;150 min/week, no strength</label>
    <label><input type="radio" name="physical" value="150â€“300 min/week, 0â€“1 strength"> 150â€“300 min/week, strength 0â€“1 days</label>
    <label><input type="radio" name="physical" value="150â€“300 min/week, 2+ strength"> 150â€“300 min/week, strength 2+ days</label>
    <label><input type="radio" name="physical" value=">300 min/week, 2+ strength"> &gt;300 min/week, strength 2+ days</label>
    <label><input type="radio" name="physical" value="Vigorous 75â€“150+ min/week"> Vigorous 75â€“150+ min/week, strength 2+ days</label>
  </div>

  <h2>Harmful Habits</h2>

<div class="question">
  <label>Alcohol consumption</label>
  <label><input type="radio" name="alcohol" value="None" required> None (0 drinks/week)</label>
  <label><input type="radio" name="alcohol" value="Low risk"> Low risk (Women:1â€“7, Men:1â€“14/week)</label>
  <label><input type="radio" name="alcohol" value="Moderate risk"> Moderate risk (Women:8â€“14, Men:15â€“28/week)</label>
  <label><input type="radio" name="alcohol" value="High risk"> High risk (Women:15â€“21, Men:29â€“42/week)</label>
  <label><input type="radio" name="alcohol" value="Very high"> Very high (&gt;21 / &gt;42/week)</label>
</div>

<div class="question">
  <label>Tobacco use (smoking/chewing)</label>
  <label><input type="radio" name="tobacco" value="None" required> None</label>
  <label><input type="radio" name="tobacco" value="Low"> Low (&lt;5/day)</label>
  <label><input type="radio" name="tobacco" value="Moderate"> Moderate (5â€“19/day)</label>
  <label><input type="radio" name="tobacco" value="High"> High (20/day)</label>
  <label><input type="radio" name="tobacco" value="Very high"> Very high (&ge;30/day)</label>
</div>

<div class="question">
  <label>Drug use (prescription misuse or illegal substances)</label>
  <label><input type="radio" name="drugs" value="None" required> None</label>
  <label><input type="radio" name="drugs" value="Low"> Low (occasional)</label>
  <label><input type="radio" name="drugs" value="Moderate"> Moderate (regular, risk)</label>
  <label><input type="radio" name="drugs" value="High"> High (dependence / health risk)</label>
  <label><input type="radio" name="drugs" value="Very high"> Very high (severe)</label>
</div>

<div class="question">
  <label>Gambling (pathological/problematic)</label>
  <label><input type="radio" name="gambling" value="None" required> None</label>
  <label><input type="radio" name="gambling" value="Low"> Low (occasional, minimal problems)</label>
  <label><input type="radio" name="gambling" value="Moderate"> Moderate (regular, some problems)</label>
  <label><input type="radio" name="gambling" value="High"> High (frequent, significant problems)</label>
  <label><input type="radio" name="gambling" value="Very high"> Very high (pathological)</label>
</div>


  <!-- Stress & Well-Being -->
  <h2>Stress & Well-Being (0â€“4 Likert Scale)</h2>
  <div id="questions"></div>

  <!-- Email -->
  <div class="question">
    <label>Email (optional)</label>
    <input type="email" name="email" placeholder="you@example.com">
  </div>

  <button type="submit">Submit</button>
</form>

<div class="score" id="results" style="display:none;">
  <p>Stress Score: <span id="stress"></span></p>
  <p>Balance Score: <span id="balance"></span></p>
  <p>Well-Being Score: <span id="wellbeing"></span></p>
  <button id="newForm">Fill Again</button>
</div>

<script>
const likertLabels = ["Never","Rarely","Sometimes","Often","Very Often"];
const stressQuestions = [
    "In the past month, I felt that things were generally going my way.",
  "During the last month, I felt confident about handling personal problems.",
  "Over the past month, I felt physically and mentally healthy enough to meet daily demands.",
  "In the past month, I was satisfied with my overall well-being and quality of life.",
  "During the last month, I felt energetic and capable of handling both work and personal responsibilities.",
  "Over the past month, I could take breaks and recover adequately during and between workdays.",
  "In the last month, support from colleagues helped me cope with stress.",
  "During the past month, my work schedule allowed me to maintain a healthy work-life balance.",
  "Over the last month, my workload prevented me from completing important personal tasks.",
  "In the past month, I had sufficient control over how I completed my work tasks."
];

// Render stress questions
const questionsDiv = document.getElementById('questions');
stressQuestions.forEach((q,i)=>{
  const div = document.createElement('div');
  div.className='question';
  div.innerHTML = `
    <label>${i+1}. ${q}</label>
    <input type="range" min="0" max="4" value="2" name="q${i}" required>
    <div class="range-labels">
      ${likertLabels.map(label=>`<span>${label}</span>`).join('')}
    </div>`;
  questionsDiv.appendChild(div);
});

// Submit form
const form = document.getElementById('assessmentForm');
form.addEventListener('submit', async e=>{
  e.preventDefault();
  const formData = {
    age: form.age.value,
    gender: form.gender.value,
    chronic: Array.from(form.querySelectorAll('input[name="chronic"]:checked')).map(c=>c.value),
    physical: form.querySelector('input[name="physical"]:checked')?.value || "",
    alcohol: form.alcohol.value,
    tobacco: form.tobacco.value,
    drugs: form.drugs.value,
    gambling: form.gambling.value,
    email: form.email.value,
    stress: stressQuestions.map((q,i)=>({title:q, answer: form.querySelector(`input[name="q${i}"]`).value}))
  };

  try {
    const response = await fetch("https://script.google.com/macros/s/AKfycbyE4HgeG1_q_QdD0EblC0aqMDlS9qugNrAqeMdefkOVGiFTzQYzdjhVgcpPfjdJ_6lN/exec", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(formData)
    });

    const result = await response.json();

    // Zeige Scores
    document.getElementById('stress').textContent = result.scores.stress;
    document.getElementById('balance').textContent = result.scores.balance;
    document.getElementById('wellbeing').textContent = result.scores.wellbeing;

    form.style.display='none';
    document.getElementById('results').style.display='block';

  } catch (err) {
    console.error(err);
    alert("âŒ Error submitting form. Please try again.");
  }
});

// Reset form
document.getElementById('newForm').addEventListener('click', ()=>{
  form.reset();
  form.style.display='block';
  document.getElementById('results').style.display='none';
});
</script>
</body>
</html>









