<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Health & Stress Index (WHO-Based)</title>
<style>
body { font-family: Roboto, Arial, sans-serif; background:#eaf5e8; margin:0; padding:0; }
.container { max-width:700px; margin:30px auto; background:#fff; padding:30px; border-radius:10px; }
h1, h2 { color:#2E5D3D; text-align:center; }
.question { margin:15px 0; padding:15px; border-radius:8px; }
.question:nth-child(odd) { background:#e0f2e9; }
.question:nth-child(even) { background:#f7fff8; }
label { display:block; margin:5px 0; }
input[type="range"] { width:100%; margin-top:5px; }
.range-labels { display:flex; justify-content:space-between; font-size:14px; color:#555; margin-top:5px; }
input[type="checkbox"], input[type="radio"] { margin-right:5px; }
select, input[type=email] { width:100%; padding:8px; margin-top:5px; border-radius:5px; border:1px solid #ccc; }
button { margin-top:10px; padding:12px 25px; color:#fff; background:#2E5D3D; border:none; border-radius:5px; cursor:pointer; font-size:16px; }
button:hover { background:#27623e; }
.score { margin-top:15px; padding:15px; border:1px solid #ccc; border-radius:5px; background:#d4efd5; text-align:center; }
nav { text-align:center; margin-bottom:20px; }
nav a { margin:0 10px; text-decoration:underline; color:#007bff; font-weight:bold; }
nav a:hover { color:#27623e; }
</style>
</head>
<body>

<div class="container">
<nav>
  <a href="index.html">Home</a>
  <a href="results.html">Assessment</a>
  <a href="recommendations.html">Recommendations</a>
</nav>

<h1>Health & Stress Index (WHO-Based)</h1>

<form id="assessmentForm">

  <!-- Demographics -->
  <div class="question">
    <label>Age:</label>
    <select name="age" required>
      <option value="" disabled selected>Select age</option>
      <option value="18-30">18–30</option>
      <option value="31-50">31–50</option>
      <option value="51-70">51–70</option>
      <option value=">70">>70</option>
    </select>
  </div>

  <div class="question">
    <label>Gender:</label>
    <select name="gender" required>
      <option value="" disabled selected>Select gender</option>
      <option value="Male">Male</option>
      <option value="Female">Female</option>
      <option value="Other">Other</option>
    </select>
  </div>

  <!-- Health Conditions -->
  <h2>Health Conditions</h2>
<div class="question">
    <label>Do you have any chronic diseases, medical conditions, or recent surgeries?</label>
    <label><input type="checkbox" name="chronic" value="None"> None</label>
    <label><input type="checkbox" name="chronic" value="Cardiovascular Disease"> Cardiovascular Disease</label>
    <label><input type="checkbox" name="chronic" value="Mental Health Condition"> Mental Health Condition</label>
    <label><input type="checkbox" name="chronic" value="Recent Surgery"> Recent Surgery</label>
    <label><input type="checkbox" name="chronic" value="Other"> Other</label>
</div>


  <!-- Physical Activity -->
  <div class="question">
    <label>Weekly Physical Activity:</label>
    <label><input type="radio" name="physical" value="Little or no activity" required> &lt;150 min/week, no strength</label>
    <label><input type="radio" name="physical" value="150–300 min/week, 0–1 strength"> 150–300 min/week, strength 0–1 days</label>
    <label><input type="radio" name="physical" value="150–300 min/week, 2+ strength"> 150–300 min/week, strength 2+ days</label>
    <label><input type="radio" name="physical" value=">300 min/week, 2+ strength"> &gt;300 min/week, strength 2+ days</label>
    <label><input type="radio" name="physical" value="Vigorous 75–150+ min/week"> Vigorous 75–150+ min/week, strength 2+ days</label>
  </div>

  <h2>Harmful Habits</h2>

<div class="question">
  <label>Alcohol consumption</label>
  <label><input type="radio" name="alcohol" value="None" required> None (0 drinks/week)</label>
  <label><input type="radio" name="alcohol" value="Low risk"> Low risk (Women:1–7, Men:1–14/week)</label>
  <label><input type="radio" name="alcohol" value="Moderate risk"> Moderate risk (Women:8–14, Men:15–28/week)</label>
  <label><input type="radio" name="alcohol" value="High risk"> High risk (Women:15–21, Men:29–42/week)</label>
  <label><input type="radio" name="alcohol" value="Very high"> Very high (&gt;21 / &gt;42/week)</label>
</div>

<div class="question">
  <label>Tobacco use (smoking/chewing)</label>
  <label><input type="radio" name="tobacco" value="None" required> None</label>
  <label><input type="radio" name="tobacco" value="Low"> Low (&lt;5/day)</label>
  <label><input type="radio" name="tobacco" value="Moderate"> Moderate (5–19/day)</label>
  <label><input type="radio" name="tobacco" value="High"> High (20/day)</label>
  <label><input type="radio" name="tobacco" value="Very high"> Very high (&ge;30/day)</label>
</div>

<div class="question">
  <label>Drug use (prescription misuse or illegal substances)</label>
  <label><input type="radio" name="drugs" value="None" required> None</label>
  <label><input type="radio" name="drugs" value="Low"> Low (occasional)</label>
  <label><input type="radio" name="drugs" value="Moderate"> Moderate (regular, risk)</label>
  <label><input type="radio" name="drugs" value="High"> High (dependence / health risk)</label>
  <label><input type="radio" name="drugs" value="Very high"> Very high (severe)</label>
</div>

<div class="question">
  <label>Gambling (pathological/problematic)</label>
  <label><input type="radio" name="gambling" value="None" required> None</label>
  <label><input type="radio" name="gambling" value="Low"> Low (occasional, minimal problems)</label>
  <label><input type="radio" name="gambling" value="Moderate"> Moderate (regular, some problems)</label>
  <label><input type="radio" name="gambling" value="High"> High (frequent, significant problems)</label>
  <label><input type="radio" name="gambling" value="Very high"> Very high (pathological)</label>
</div>


  <!-- Stress & Well-Being -->
  <h2>Stress & Well-Being (0–4 Likert Scale)</h2>
  <div id="questions"></div>

  <!-- Email -->
  <div class="question">
    <label>Email (optional)</label>
    <input type="email" name="email" placeholder="you@example.com">
  </div>

  <button type="submit">Submit</button>
</form>

<div class="score" id="results" style="display:none;">
  <p>Stress Score: <span id="stress"></span></p>
  <p>Balance Score: <span id="balance"></span></p>
  <p>Well-Being Score: <span id="wellbeing"></span></p>
  <button id="newForm">Fill Again</button>
</div>

<script>
const likertLabels = ["Never","Rarely","Sometimes","Often","Very Often"];
const stressQuestions = [
  "Over the past month, how often have you felt overwhelmed by work demands?",
  "During the past month, I often felt emotionally drained after work.",
  "In the last month, I had difficulty relaxing after work.",
  "Over the past month, I found myself worrying about work during personal time.",
  "During the last month, I sometimes felt unable to cope with all my work responsibilities."
];

// Render stress questions
const questionsDiv = document.getElementById('questions');
stressQuestions.forEach((q,i)=>{
  const div = document.createElement('div');
  div.className='question';
  div.innerHTML = `
    <label>${i+1}. ${q}</label>
    <input type="range" min="0" max="4" value="2" name="q${i}" required>
    <div class="range-labels">
      ${likertLabels.map(label=>`<span>${label}</span>`).join('')}
    </div>`;
  questionsDiv.appendChild(div);
});

// Submit form
const form = document.getElementById('assessmentForm');
form.addEventListener('submit', async e=>{
  e.preventDefault();
  const formData = {
    age: form.age.value,
    gender: form.gender.value,
    chronic: Array.from(form.querySelectorAll('input[name="chronic"]:checked')).map(c=>c.value),
    physical: form.querySelector('input[name="physical"]:checked')?.value || "",
    alcohol: form.alcohol.value,
    tobacco: form.tobacco.value,
    drugs: form.drugs.value,
    gambling: form.gambling.value,
    email: form.email.value,
    stress: stressQuestions.map((q,i)=>({title:q, answer: form.querySelector(`input[name="q${i}"]`).value}))
  };

  try {
    const response = await fetch("https://script.google.com/macros/s/AKfycbyE4HgeG1_q_QdD0EblC0aqMDlS9qugNrAqeMdefkOVGiFTzQYzdjhVgcpPfjdJ_6lN/exec", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(formData)
    });

    const result = await response.json();

    // Zeige Scores
    document.getElementById('stress').textContent = result.scores.stress;
    document.getElementById('balance').textContent = result.scores.balance;
    document.getElementById('wellbeing').textContent = result.scores.wellbeing;

    form.style.display='none';
    document.getElementById('results').style.display='block';

  } catch (err) {
    console.error(err);
    alert("❌ Error submitting form. Please try again.");
  }
});

// Reset form
document.getElementById('newForm').addEventListener('click', ()=>{
  form.reset();
  form.style.display='block';
  document.getElementById('results').style.display='none';
});
</script>
</body>
</html>







